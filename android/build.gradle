apply plugin: 'com.android.library'

buildscript {
  // The Android Gradle plugin is only required when opening the android folder stand-alone.
  // This avoids unnecessary downloads and potential conflicts when the library is included as a
  // module dependency in an application project.
  if (project == rootProject) {
    repositories {
      google()
      mavenCentral()
      jcenter()
    }

    dependencies {
      //noinspection GradleDependency
      classpath("com.android.tools.build:gradle:4.1.0")
      classpath 'de.undercouch:gradle-download-task:3.4.3'
    }
  }
}

android {
  compileSdkVersion 30
  buildToolsVersion "30.0.3"

  defaultConfig {
    minSdkVersion 21
    targetSdkVersion 30
  }
  aaptOptions {
    noCompress "tflite"
  }
  lintOptions {
    abortOnError false
  }
}

dependencies {
  implementation fileTree(dir: 'libs', include: ['*.jar', '*.aar'])
  implementation 'com.facebook.react:react-native:+'  // From node_modules
  implementation 'androidx.appcompat:appcompat:1.3.0'
  implementation 'androidx.coordinatorlayout:coordinatorlayout:1.1.0'
  implementation 'com.google.android.material:material:1.4.0'

  // added MLKit dependencies for face detector
  implementation 'com.google.mlkit:face-detection:16.1.2'
  implementation 'org.tensorflow:tensorflow-lite:2.4.0'
  implementation 'org.tensorflow:tensorflow-lite-gpu:2.4.0'
  implementation 'org.tensorflow:tensorflow-lite-support:0.1.0'
}
// import DownloadModels task
project.ext.ASSET_DIR = projectDir.toString() + '/src/main/assets'
project.ext.TMP_DIR = project.buildDir.toString() + '/downloads'

// Download default models; if you wish to use your own models then
// place them in the "assets" directory and comment out this line.
//apply from: "download_model.gradle"
apply plugin: 'de.undercouch.download'
